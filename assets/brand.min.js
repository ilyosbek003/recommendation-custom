!function(){"use strict";function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var i=!0,o=!0,r=function(){if(window.BackgroundVideoSetting){var e=window.matchMedia("(max-width: 750px)").matches;Object.entries(window.BackgroundVideoSetting).forEach((function(i){var o=t(i,2),r=o[0],a=(o[1],document.querySelector("#shopify-section-".concat(r," .Button-watch")));if(a){var s=document.querySelector("#shopify-section-".concat(r," .long-video video")),c=document.querySelector("#shopify-section-".concat(r," .main-wrapper")),l=document.querySelector(".section-bg");a.addEventListener("click",(function(t){t.preventDefault(),c.classList.add("playing"),l.style.display="none",s.scrollIntoView({behavior:"smooth",block:"".concat(e?"center":"end")}),n||s.requestFullscreen(),s.play()}));var u;u=r,document.querySelector("#shopify-section-".concat(u," .closeBtn_wrapper .Icon.Icon--close")).addEventListener("click",(function(t){c.classList.remove("playing"),l.style.display="block",s.pause(),s.currentTime=0}))}}))}},a=function(){window.BackgroundVideoSetting&&Object.entries(window.BackgroundVideoSetting).forEach((function(e){var n=t(e,2),i=n[0],o=n[1],r=window.matchMedia("(max-width: 750px)").matches,a=document.querySelector("#shopify-section-".concat(i," video")),s=o.mobile,c=o.desktop;a.src=r?s:c})),function(){var t=document.querySelectorAll(".embededVideo");if(t){var e={root:null,rootMargin:"0px",threshold:.01};t.forEach((function(t){var n=t.closest(".section-wrapper").querySelector(".ButtonGroup--controlers");if(n){var r=new IntersectionObserver((function(e){if(!e[0].isIntersecting)return o=!t.paused,i=t.muted,t.pause(),void n.classList.remove("Btn_unmute");t.muted=i,o&&(t.play(),n.classList.add("Btn_unmute"))}),e);n.addEventListener("click",(function(e){var i=e.target.closest("button").querySelector("svg").getAttribute("data-type");"pause"!==i&&"resume"!==i||(t[n.classList.contains("Btn_pause")?"play":"pause"](),n.classList.toggle("Btn_pause")),"mute"!==i&&"unmute"!==i||(t.muted=n.classList.contains("Btn_unmute"),t.volume=n.classList.contains("Btn_unmute")?0:1,n.classList.toggle("Btn_unmute"))})),r.observe(t)}}))}}(),r()},s=function(t){this.id="#shopify-section-".concat(t),this.activeVideoContainer=document.querySelector("".concat(this.id," .active-video")),this.player=document.querySelector("".concat(this.id," video.active-player")),this.toggle=document.querySelector("".concat(this.id," .player__button.toggle")),this.fullScreen=document.querySelector("".concat(this.id," .player__button.full")),this.progress=document.querySelector("".concat(this.id," .progress-bar")),this.timeline=document.querySelector("".concat(this.id," .timeline")),this.volumeRate=document.querySelector("".concat(this.id," .player__slider.volumeRate-bar")),this.volumeBtn=document.querySelector("".concat(this.id," .player__button.volume")),this.volumeContainer=document.querySelector("".concat(this.id," .volume-container")),this.playBtn=document.querySelector("".concat(this.id," .active-video .Icon.Icon--play")),this.controlBar=document.querySelector("".concat(this.id," .control_bar")),this.videoSlides=document.querySelector("".concat(this.id," .video-gallery__slides")),this.isPaused=!1,this.addEventListenersToSection(),this.activateSlider()},c=s.prototype;c.togglePlay=function(){this.activeVideoContainer.classList.add("play");var t=window.innerHeight==screen.height,e=this.player.paused?"play":"pause",n=window.matchMedia("(max-width: 750px)").matches;t||this.player[e](),n&&this.fullScreenRequest()},c.updateButton=function(){this.player.paused?this.toggle.classList.remove("Btn_pause"):this.toggle.classList.add("Btn_pause"),this.hideVolumeRate()},c.fullScreenRequest=function(){(this.player.webkitRequestFullscreen||this.player.requestFullscreen||this.player.mozRequestFullScreen||this.msRequestFullscreen).call(this.player),this.hideVolumeRate()},c.updateTimeline=function(){var t=Math.floor(this.player.currentTime/60/60),e=Math.floor(this.player.currentTime/60%60),n=Math.floor(this.player.currentTime%60),i=Math.floor(this.player.duration/60/60),o=Math.floor(this.player.duration/60%60),r=Math.floor(this.player.duration%60);this.timeline.textContent="\n    ".concat(t>0?"".concat(String(t).padStart(2,"0"),":"):"").concat(String(e).padStart(2,"0"),":").concat(String(n).padStart(2,"0")," | \n    ").concat(i>0?"".concat(String(i).padStart(2,"0"),":"):"").concat(String(o).padStart(2,"0"),":").concat(String(r).padStart(2,"0"))},c.handleProgress=function(){"none"!=this.player.style.backgroundImage&&(this.player.style.backgroundImage="none");var t=this.player.currentTime/this.player.duration*1e3;this.isPaused||(this.progress.value=t),this.updateTimeline()},c.updateProgress=function(){this.player.currentTime=this.progress.value/1e3*this.player.duration},c.pauseOnMouseDown=function(){this.isPaused=!0},c.resumeOnMouseUp=function(){this.isPaused=!1},c.updateVolume=function(){0==this.volumeRate.value?this.volumeBtn.classList.add("Btn_mute"):this.volumeBtn.classList.remove("Btn_mute"),this.player.volume=this.volumeRate.value/100},c.hideVolumeRate=function(){this.volumeContainer.classList.remove("rate-active")},c.toggleVolumeRate=function(){this.volumeContainer.classList.toggle("rate-active")},c.startVideo=function(){this.activeVideoContainer.classList.add("play"),this.player.play()},c.changeVideo=function(t){var e=t.target.closest(".video-gallery__slide"),n=e.dataset.src,i=e.style.backgroundImage;this.activeVideoContainer.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),e.setAttribute("data-src",this.player.src),e.style.backgroundImage=this.player.style.backgroundImage,this.player.src=n,this.player.style.backgroundImage=i,this.startVideo()},c.addEventListenersToSection=function(){this.player.addEventListener("click",this.togglePlay.bind(this)),this.toggle.addEventListener("click",this.togglePlay.bind(this)),this.player.addEventListener("play",this.updateButton.bind(this)),this.player.addEventListener("pause",this.updateButton.bind(this)),this.fullScreen.addEventListener("click",this.fullScreenRequest.bind(this)),this.player.addEventListener("timeupdate",this.handleProgress.bind(this)),this.progress.addEventListener("change",this.updateProgress.bind(this)),this.progress.addEventListener("mousedown",this.pauseOnMouseDown.bind(this)),this.progress.addEventListener("mouseup",this.resumeOnMouseUp.bind(this)),this.volumeRate.addEventListener("change",this.updateVolume.bind(this)),this.volumeBtn.addEventListener("click",this.toggleVolumeRate.bind(this)),this.player.addEventListener("durationchange",this.updateTimeline.bind(this))},c.activateSlider=function(){var t=window.matchMedia("(max-width: 750px)").matches;window.videoImageBlocks&&t&&new Flickity(this.videoSlides,{pageDots:!1,wrapAround:!0,autoPlay:5e3,prevNextButtons:!1,cellAlign:"left"})};var l=function(){var t=window.videoGallerySettings;null!=t&&t.length&&t.forEach((function(t){new s(t)}))};var u=function(){if(window.storySettings){var t=document.querySelector("sticky-header"),e=document.querySelector(".brand_nav"),n=document.querySelectorAll(".story-container"),i=!1;e.addEventListener("click",(function(n){if(n.target.closest("a.brand-section-title")){n.preventDefault();var o=+t.getBoundingClientRect().height,r=+e.getBoundingClientRect().height,a=+document.querySelector('[id^="shopify-section-sections--"][id$="__announcement-bar"]').getBoundingClientRect().height,s=n.target.closest("a.brand-section-title").getAttribute("href"),c=document.querySelector(s).getBoundingClientRect().top+window.scrollY-o-r-a;window.scrollTo({top:c,behavior:"smooth"}),i=s}})),function(t){t.forEach((function(t){var e=t.getAttribute("data-title");if(!(e.length<1)){var n='<a class="brand-section-title" href="#section-'.concat(e,'">').concat(e,"</a>");document.querySelector(".brand_nav").insertAdjacentHTML("beforeend",n)}}))}(n),o(n),window.addEventListener("scroll",(function(t){o(n)}))}function o(n){var o=window.pageYOffset;n.forEach((function(n){if(!(n.dataset.title<1)){var r=+t.getBoundingClientRect().height,a=+e.getBoundingClientRect().height,s=+document.querySelector('[id^="shopify-section-sections--"][id$="__announcement-bar"]').getBoundingClientRect().height,c=n.offsetHeight,l=n.offsetTop-r-a-s-20,u=n.getAttribute("id"),d=+e.getBoundingClientRect().width,h=e.getBoundingClientRect().x;if(o>l&&o<=l+c&&!i){var m=document.querySelector('.brand_nav a[href*="#'.concat(u,'"'));m.classList.add("active");var y=m.getBoundingClientRect().x;m.getBoundingClientRect().width;(+e.scrollLeft+d-.3*d<y||y<h)&&e.scrollTo(y,0)}else if(i){document.querySelector('.brand_nav a[href*="#'.concat(u,'"')).classList.remove("active"),document.querySelector('.brand_nav a[href*="'.concat(i,'"')).classList.add("active");var f=document.querySelector(i),g=f.offsetTop-r-a-s-20;o>g&&o<=g+f.offsetHeight&&(i=!1)}else document.querySelector('.brand_nav a[href*="#'.concat(u,'"')).classList.remove("active")}}))}};function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var m,y=function(t){t.querySelectorAll(".animated-component").forEach((function(t){t.classList.add("animated")}))},f=function(){var t=window.pageYOffset;Object.entries(window.storySettings).forEach((function(e){var n=d(e,2),i=n[0];n[1];window.storySettings[i].top<t&&document.querySelectorAll("#shopify-section-".concat(i," .animated-component")).forEach((function(t){t.classList.add("animated")}))}))},g=function(){var t;!function(){var t=[];Object.entries(window.storySettings).forEach((function(e){var n=d(e,2),i=n[0],o=n[1],r=document.querySelector(o.id);t.push(r);var a=r.offsetTop,s=r.getBoundingClientRect().bottom,c=.3*r.getBoundingClientRect().height;window.storySettings[i].bottom=s,window.storySettings[i].top=a,window.storySettings[i].animTriggerThreshold=c})),f();var e={root:null,rootMargin:"0px",threshold:.3};t.forEach((function(t){new IntersectionObserver((function(e){e[0].isIntersecting&&y(t)}),e).observe(t)}))}(),(t=document.querySelectorAll("iframe.story-year-video"))&&t.forEach((function(t){new Vimeo.Player(t).on("play",(function(){t.closest(".image_wrapper").style.backgroundImage="none"}))}))};m=function(){return a(),l(),u(),g()},"complete"===document.readyState||"interactive"===document.readyState?setTimeout(m,1):document.addEventListener("DOMContentLoaded",m)}();
//# sourceMappingURL=brand.min.js.map